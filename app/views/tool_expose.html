
<div class="container" id="create">
    <!-- Titel -->
    <div class="row">
        <div class="col-xs-12">


            <h2 ng-show="c_tool.currentExpose.id">Datensatz bearbeiten</h2>
            <h2 ng-hide="c_tool.currentExpose.id">Datensatz erstellen</h2>
        </div>
    </div>
    <!-- Breadcrump -->
    <div class="row">
        <div class="col-xs-12">
            <a ng-show="c_tool.currentExpose.geschaeftsart" ng-click="c_tool.deleteProp('geschaeftsart')">{{c_tool.currentExpose.geschaeftsart==1?'Kauf':'Miete'}}</a>
            <a ng-show="c_tool.currentExpose.objekttyp" ng-click="c_tool.deleteProp('objekttyp')">{{c_tool.currentExpose.objekttyp==1?'Haus':c_tool.currentExpose.objekttyp==2?'Wohnung':'Grundstück'}}</a>
        </div>
    </div>
    <!-- Geschäftsart -->
    <div class="row" ng-show="!c_tool.currentExpose.geschaeftsart">
        <div class="col-xs-12">
            <button ng-click="c_tool.setProp('geschaeftsart',1)">Kauf</button>
            <button ng-click="c_tool.currentExpose.geschaeftsart=2">Miete</button>
        </div>
    </div>
    <!-- Objektart -->
    <div class="row" ng-show="c_tool.currentExpose.geschaeftsart && !c_tool.currentExpose.objekttyp">
        <div class="col-xs-12">
            <button ng-click="c_tool.currentExpose.objekttyp=1">Haus</button>
            <button ng-click="c_tool.currentExpose.objekttyp=2">Wohnung</button>
            <button ng-click="c_tool.currentExpose.objekttyp=3">Grundstück</button>
        </div>
    </div>
    <!-- Objektdaten -->
    <div class="row" ng-show="c_tool.currentExpose.objekttyp && c_tool.currentExpose.geschaeftsart">
        <div class="col-xs-12">
            <form method="POST" name="form_object" id="formExpose" role="form" class="row" action="">
                <uib-accordion close-others="true" class="col-xs-12">
                    <uib-accordion-group is-open="c_tool.accExpo.statusAddress.open" ng-click="c_tool.doopen()">
                        <uib-accordion-heading>
                            Adresse
                            <i class="pull-right glyphicon"
                               ng-class="{'glyphicon-chevron-down': c_tool.accExpo.statusAddress.open, 'glyphicon-chevron-right': ! c_tool.accExpo.statusAddress.open}"></i>
                        </uib-accordion-heading>
                        <div class="row">
                            <label class="control-label col-xs-6 col-md-offset-2 col-md-4">
                                <div>
                                    <div class="text-inline">
                                        <span>Expose-ID</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.go.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="text" id="ex_go" name="go" placeholder="" class="form-control"
                                       ng-model="c_tool.currentExpose.go" ng-model-options="{ debounce: 500 }" required>
                            </label>
                            <label class="control-label col-xs-6 col-md-4">
                                <div>
                                    <div class="text-inline">
                                        <span>Exposé-Titel</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.exposetitel.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="text" name="exposetitel" placeholder="" class="form-control"
                                       ng-model="c_tool.currentExpose.exposetitel" ng-model-options="{ debounce: 500 }">
                            </label>
                        </div>
                        <div class="row row-paddingbottom" id="address">
                            <label class="control-label col-xs-8 col-md-6 col-md-offset-2">
                                <div>
                                    <div class="text-inline">
                                        <span>Strasse</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.strasse.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="text" name="strasse" placeholder="" class="form-control"
                                       ng-model="c_tool.currentExpose.strasse" ng-model-options="{ debounce: 500 }">
                            </label>
                            <label class="control-label col-xs-4 col-md-2">
                                <div>
                                    <div class="text-inline">
                                        <span>Hausnummer</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.hausnummer.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="text" name="hausnummer" placeholder="" class="form-control"
                                       ng-model="c_tool.currentExpose.hausnummer" ng-model-options="{ debounce: 500 }">
                            </label>
                            <label class="control-label col-xs-4 col-md-2 col-md-offset-2">
                                <div>
                                    <div class="text-inline">
                                        <span>PLZ</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.plz.$error">
                                        <div ng-messages-include="views/exposeForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="text" name="plz" placeholder="" class="form-control"
                                       ng-model="c_tool.currentExpose.plz" ng-model-options="{ debounce: 500 }"
                                       ng-pattern="/^[0-9]{4,6}$/">
                            </label>
                            <label class="control-label col-xs-8 col-md-6">
                                <div>
                                    <div class="text-inline">
                                        <span>Ort</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.ort.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="text" name="ort" placeholder="" class="form-control"
                                       ng-model="c_tool.currentExpose.ort" ng-model-options="{ debounce: 500 }">
                            </label>

                            <label class="control-label col-xs-6 col-md-4 col-md-offset-2">
                                <span>Bezirk</span>
                                <input type="text" ng-model="c_tool.currentExpose.bezirk" placeholder="" class="form-control" ng-model-options="{ debounce: 500 }">
                            </label>
                            <label class="control-label col-xs-6 col-md-4">
                                <div>
                                    <div class="text-inline">
                                        <span>Land</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.land.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <select name="land" class="form-control" ng-model="c_tool.currentExpose.land"
                                        ng-model-options="{ debounce: 500 }" ng-options="v as v for v in c_tool.datalists.land">
                                    <option value=""></option>
                                </select>
                            </label>
                        </div>
                        <div class="row row-paddingbottom">
                            <label class="col-xs-4 col-md-2 col-md-offset-2"><span class="btn btn-danger btn"
                                                                                   style="white-space: normal;"
                                                                                   ng-click="c_tool.getMap()"> Lageplan
										erstellen</span>
                            </label>
                            <label class="col-xs-4 col-md-2" style="display: none;" id="parent_saveMap">
                                <span class="btn btn-default" style="white-space: normal;"
                                      id="saveMap"> Karte speichern</span>
                                <span class="text-success" style="display: none" id="saveMap_return">gespeichert &#10004;</span>
                            </label>
<!--
                            <div class="checkbox_custom col-xs-6 col-md-3">
                                <label class="">
                                    <input type="checkbox" ng-checked="c_tool.currentExpose.showMap">
                                    <span>Im Exposé anzeigen</span>
                                </label>
                            </div>
                            -->
                        </div>
                        <div class="row">
                            <div class="col-xs-10 col-xs-offset-1 col-md-8 col-md-offset-2">
                                <leaflet center="c_tool.mapdata.center" markers="c_tool.mapdata.markers"
                                         layers="c_tool.mapdata.layers"></leaflet>
                            </div>
                        </div>
                    </uib-accordion-group>
                    <uib-accordion-group is-open="c_tool.accExpo.statusKosten.open">
                        <uib-accordion-heading>
                            Kosten
                            <i class="pull-right glyphicon"
                               ng-class="{'glyphicon-chevron-down': c_tool.accExpo.statusKosten.open, 'glyphicon-chevron-right': ! c_tool.accExpo.statusKosten.open}"></i>
                        </uib-accordion-heading>
                        <div class="row row-paddingbottom" ng-if="c_tool.currentExpose.geschaeftsart==1">
                            <label class="control-label col-xs-6">
                                <div>
                                    <div class="text-inline">
                                        <span>Kaufpreis</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.kaufpreis.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="number" name="kaufpreis" placeholder="in €" class="form-control" step="1"
                                       ng-model="c_tool.currentExpose.kaufpreis" ng-model-options="{ debounce: 500 }" required>
                            </label>
                            <label class="control-label col-xs-6">
                                <div>
                                    <div class="text-inline">
                                        <span>Wohngeld</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.wohngeld.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="number" name="wohngeld" placeholder="in €" class="form-control" step="1"
                                       ng-model="c_tool.currentExpose.wohngeld" ng-model-options="{ debounce: 500 }">
                            </label>
                        </div>
                        <div class="row row-paddingbottom" ng-if="c_tool.currentExpose.geschaeftsart==2">
                            <label class="control-label col-xs-6 col-sm-4">
                                <div>
                                    <div class="text-inline">
                                        <span>Kaltmiete</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.kaltmiete.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="number" name="kaltmiete" placeholder="in €" class="form-control" step="1"
                                       ng-required="!c_tool.currentExpose.pauschalmiete"
                                       ng-model="c_tool.currentExpose.kaltmiete" ng-model-options="{ debounce: 500 }"
                                       ng-change="c_tool.clearOtherVal('kaltmiete','pauschalmiete')">
                            </label>
                            <label class="control-label col-xs-6 col-sm-4">
                                <div>
                                    <div class="text-inline">
                                        <span>Nebenkosten</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.nebenkosten.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="number" name="nebenkosten" placeholder="in €" class="form-control" step="0.01"
                                       ng-model="c_tool.currentExpose.nebenkosten" ng-model-options="{ debounce: 500 }"
                                       ng-change="c_tool.clearOtherVal('nebenkosten','pauschalmiete')">
                            </label>
                            <label class="control-label col-xs-6  col-sm-4" id="inputPauschalmiete">
                                <div>
                                    <div class="text-inline">
                                        <span>Pauschalmiete</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.pauschalmiete.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="number" name="pauschalmiete" placeholder="in €" class="form-control" step="1"
                                       ng-required="!c_tool.currentExpose.kaltmiete"
                                       ng-model="c_tool.currentExpose.pauschalmiete" ng-model-options="{ debounce: 500 }"
                                       ng-change="c_tool.clearOtherVal('pauschalmiete',['kaltmiete','nebenkosten'])">
                            </label>
                        </div>
                        <div class="row row-paddingbottom" ng-if="c_tool.currentExpose.geschaeftsart==1">
                            <label class="control-label col-xs-6 col-md-3">
                                <div>
                                    <div class="text-inline">
                                        <span>Provision netto</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.provision.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="number" name="provision" placeholder="in €" class="form-control" step="0.01"
                                       ng-required=""
                                       ng-model="c_tool.currentExpose.provision" ng-model-options="{ debounce: 500 }">
                            </label>

                            <label class="control-label col-xs-6 col-md-3">
                                <div>
                                    <div class="text-inline">
                                        <span>Einheit Prov.</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.provisionEinheit.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <select name="provisionEinheit" class="form-control" ng-model="c_tool.currentExpose.provisionEinheit"
                                        ng-model-options="{ debounce: 500 }">
                                    <option value="Euro">Euro</option>
                                    <option value="NKM">NKM</option>
                                </select>
                            </label>
                        </div>
                        <div class="row row-paddingbottom" ng-if="c_tool.currentExpose.geschaeftsart==2">
                            <label class="control-label col-xs-6 col-md-3">
                                <div>
                                    <div class="text-inline">
                                        <span>Kaution netto</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.kaution.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="number" name="kaution" placeholder="in €" class="form-control" step="0.01"
                                       ng-required=""
                                       ng-model="c_tool.currentExpose.kaution" ng-model-options="{ debounce: 500 }">
                            </label>
                            <label class="control-label col-xs-6 col-md-3">
                                <div>
                                    <div class="text-inline">
                                        <span>Einheit Kaut.</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.kautionEinheit.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <select name="kautionEinheit" class="form-control" ng-model="c_tool.currentExpose.kautionEinheit"
                                        ng-model-options="{ debounce: 500 }">
                                    <option value="Euro">Euro</option>
                                    <option value="NKM">NKM</option>
                                </select>
                            </label>
                        </div>
                        <div class="row">
                            <label class="control-label col-xs-4 col-sm-3">
                                <div>
                                    <div class="text-inline">
                                        <span>Anzahl Stellplätze</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.stellplatz_count.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="number" name="stellplatz_count" placeholder="" class="form-control" step="1"
                                       ng-model="c_tool.currentExpose.stellplatz" ng-model-options="{ debounce: 500 }"
                                       ng-change="c_tool.clearOtherVal('kaltmiete','pauschalmiete')">
                            </label>
                            <label class="control-label col-xs-4 col-sm-3">
                                <div>
                                    <div class="text-inline">
                                        <span>Gesamtkosten für Stellplätze</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.stellplatz_cost.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="number" name="stellplatz_cost" placeholder="in €" class="form-control" step="0.01"

                                       ng-model="c_tool.currentExpose.stellplatzkosten" ng-model-options="{ debounce: 500 }">
                            </label>
                            <label class="control-label col-xs-4 col-sm-3">
                                <div>
                                    <div class="text-inline">
                                        <span>Stellplatzart</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.stellplatztyp.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="text" name="stellplatztyp" placeholder="Doppelklick für Vorlagen" class="form-control"
                                       list="datalist_stellplatztyp"
                                       ng-model="c_tool.currentExpose.stellplatztyp" ng-model-options="{ debounce: 500 }">
                                <datalist id="datalist_stellplatztyp">
                                    <option  data-ng-repeat="dl_opt in c_tool.datalists.stellplatztyp | orderBy:'toString()'" value="{{dl_opt}}">
                                </datalist>
                            </label>
                        </div>
                    </uib-accordion-group>
                    <uib-accordion-group is-open="c_tool.accExpo.statusStamm.open">
                        <uib-accordion-heading>
                            Stammdaten
                            <i class="pull-right glyphicon"
                               ng-class="{'glyphicon-chevron-down': c_tool.accExpo.statusStamm.open, 'glyphicon-chevron-right': ! c_tool.accExpo.statusStamm.open}"></i>
                        </uib-accordion-heading>
                        <div class="row row-paddingbottom">
                            <label class="control-label col-xs-4 col-sm-3" ng-if="c_tool.currentExpose.objekttyp==1">
                                <div>
                                    <div class="text-inline">
                                        <span>Haustyp</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.haustyp.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="text" name="haustyp" placeholder="Doppelklick für Vorlagen" class="form-control"
                                       list="datalist_haustyp"
                                       ng-model="c_tool.currentExpose.haustyp" ng-model-options="{ debounce: 500 }">
                                <datalist id="datalist_haustyp">
                                    <option  data-ng-repeat="dl_opt in c_tool.datalists.haustyp | orderBy:'toString()'" value="{{dl_opt}}">
                                </datalist>
                            </label>

                            <label class="control-label col-xs-4 col-sm-3" ng-if="c_tool.currentExpose.objekttyp==2">
                                <div>
                                    <div class="text-inline">
                                        <span>Wohnungstyp</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.wohnungstyp.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="text" name="wohnungstyp" placeholder="Doppelklick für Vorlagen" class="form-control"
                                       list="datalist_wohnungstyp"
                                       ng-model="c_tool.currentExpose.besonderheit" ng-model-options="{ debounce: 500 }">
                                <datalist id="datalist_wohnungstyp">
                                    <option  data-ng-repeat="dl_opt in c_tool.datalists.wohnungstyp | orderBy:'toString()'" value="{{dl_opt}}">
                                </datalist>
                            </label>

                            <label class="control-label col-xs-4 col-sm-3">
                                <div>
                                    <div class="text-inline">
                                        <span>Baujahr</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.baujahr.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="text" name="baujahr" placeholder="Jahreszahl" class="form-control"
                                       list="datalist_jahreszahl"
                                       ng-model="c_tool.currentExpose.baujahr" ng-model-options="{ debounce: 500 }">
                                <datalist id="datalist_jahreszahl">
                                    <option  data-ng-repeat="dl_opt in c_tool.datalists.jahreszahl | orderBy:'toValue()'" value="{{dl_opt}}">
                                </datalist>
                            </label>
                            <div class="control-label col-xs-8 col-sm-6">
                                <h4>Zustand</h4>
                                <label class="control-label col-xs-4 col-sm-3">
                                    <input type="checkbox" name="renoviert" ng-model="c_tool.currentExpose.renoviert">
                                    <span class="tag">renoviert</span>
                                </label>
                                <label class="control-label col-xs-4 col-sm-3">
                                    <input type="checkbox" name="saniert" ng-model="c_tool.currentExpose.saniert">
                                    <span class="tag">saniert</span>
                                </label>
                                <label class="control-label col-xs-4 col-sm-3">
                                    <input type="checkbox" name="moebliert" ng-model="c_tool.currentExpose.moebliert">
                                    <span class="tag">möbliert</span>
                                </label>
                            </div>
                        </div>
                        <div class="row row-paddingbottom">
                            <label class="control-label col-xs-6 col-sm-3">
                                <div>
                                    <div class="text-inline">
                                        <span>Energieausweis</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.energieausweis.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="text" name="energieausweis" placeholder="Doppelklick für Vorlagen" class="form-control"
                                       list="datalist_energieausweis" ng-disabled="c_tool.currentExpose.denkmalschutz"
                                       ng-model="c_tool.currentExpose.energieausweisTyp" ng-model-options="{ debounce: 500 }">
                                <datalist id="datalist_energieausweis">
                                    <option  data-ng-repeat="dl_opt in c_tool.datalists.energieausweis | orderBy:'toString()'" value="{{dl_opt}}">
                                </datalist>
                            </label>
                            <label class="control-label col-xs-6 col-sm-3">
                                <div>
                                    <div class="text-inline">
                                        <span>Energieverbrauchskennwert</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.energiewert.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="text" name="energiewert" placeholder="in kWh/m² * a" class="form-control"
                                       ng-disabled="c_tool.currentExpose.denkmalschutz"
                                       ng-model="c_tool.currentExpose.energiewert" ng-model-options="{ debounce: 500 }">

                            </label>
                            <div class="control-label col-xs-6 col-sm-4">
                                <h4>&nbsp;</h4>
                                <label class="control-label col-xs-12">
                                    <input type="checkbox" name="denkmalschutz" ng-model="c_tool.currentExpose.denkmalschutz">
                                    <span class="tag">Denkmalschutz vorhanden</span>
                                </label>
                            </div>
                        </div>
                        <div class="row">
                            <label class="control-label col-xs-4 col-sm-3">
                                <div>
                                    <div class="text-inline">
                                        <span>Nutzfläche</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.nutzflaeche.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="text" name="nutzflaeche" placeholder="Fläche in m²" class="form-control"
                                       ng-model="c_tool.currentExpose.nutzflaeche" ng-model-options="{ debounce: 500 }">
                            </label>
                            <label class="control-label col-xs-4 col-sm-3">
                                <div>
                                    <div class="text-inline">
                                        <span>Wohnfläche</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.wohnflaeche.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="text" name="wohnflaeche" placeholder="Fläche in m²" class="form-control" required
                                       ng-model="c_tool.currentExpose.wohnflaeche" ng-model-options="{ debounce: 500 }">
                            </label>
                            <label class="control-label col-xs-4 col-sm-3" ng-if="c_tool.currentExpose.objekttyp!=2">
                                <div>
                                    <div class="text-inline">
                                        <span>Grundstücksfläche</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.grundstueckflaeche.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="text" name="grundstueckflaeche" placeholder="Fläche in m²" class="form-control"
                                       ng-model="c_tool.currentExpose.grundstueckflaeche" ng-model-options="{ debounce: 500 }">
                            </label>
                            <label class="control-label col-xs-4 col-sm-3">
                                <div>
                                    <div class="text-inline">
                                        <span>Deckenhöhe</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.deckenhoehe.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="number" name="deckenhoehe" placeholder="Höhe in m" class="form-control" step="0.1"
                                       ng-model="c_tool.currentExpose.decke" ng-model-options="{ debounce: 500 }">
                            </label>
                        </div>
                        <div class="row row-paddingbottom">
                            <label class="control-label col-xs-4 col-sm-3">
                                <div>
                                    <div class="text-inline">
                                        <span>Zimmer</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.wohnflaeche.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="text" name="zimmer" placeholder="" class="form-control" list="datalist_zimmer" required
                                       ng-model="c_tool.currentExpose.zimmer" ng-model-options="{ debounce: 500 }">
                                <datalist id="datalist_zimmer">
                                    <option  data-ng-repeat="dl_opt in c_tool.datalists.zimmer | orderBy:'toValue()'" value="{{dl_opt}}">
                                </datalist>
                            </label>
                            <label class="control-label col-xs-4 col-sm-3">
                                <div>
                                    <div class="text-inline">
                                        <span>davon Schlafzimmer</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.schlafzimmer.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="text" name="schlafzimmer" placeholder="" class="form-control" list="datalist_zimmer"
                                       ng-model="c_tool.currentExpose.schlafzimmer" ng-model-options="{ debounce: 500 }">
                            </label>
                            <label class="control-label col-xs-4 col-sm-3"  ng-if="c_tool.currentExpose.objekttyp!=3">
                                <div>
                                    <div class="text-inline">
                                        <span>Stockwerkanzahl Haus</span>
                                    </div>
                                </div>
                                <input type="text" name="stockwerke" placeholder="" class="form-control" list="datalist_geschoss" required
                                       ng-model="c_tool.currentExpose.stockwerke" ng-model-options="{ debounce: 500 }">
                            </label>
                            <label class="control-label col-xs-4 col-sm-3" ng- ng-if="c_tool.currentExpose.objekttyp==2">
                                <div>
                                    <div class="text-inline">
                                        <span>Stockwerk der Wohnung</span>
                                    </div>
                                </div>
                                <input type="text" name="stockwerk" placeholder="" class="form-control" list="datalist_geschoss" required
                                       ng-model="c_tool.currentExpose.stockwerk" ng-model-options="{ debounce: 500 }">
                            </label>
                        </div>
                        <!--
                        <div class="row row-paddingbottom">
                            <label class="control-label col-xs-4 col-sm-3">
                                <div>
                                    <div class="text-inline">
                                        <span>Balkon</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.balkon.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="text" name="balkon" placeholder="Anzahl oder m²" class="form-control"
                                       ng-model="c_tool.currentExpose.balkon" ng-model-options="{ debounce: 500 }">
                            </label>
                            <label class="control-label col-xs-4 col-sm-3">
                                <div>
                                    <div class="text-inline">
                                        <span>Terrasse</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.terrasse.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="text" name="terrasse" placeholder="Anzahl oder m²" class="form-control"
                                       ng-model="c_tool.currentExpose.terrasse" ng-model-options="{ debounce: 500 }">
                            </label>
                        </div>
                        -->
                        <div class="row row-paddingbottom">
                            <label class="control-label col-xs-4 col-sm-3">
                                <div>
                                    <div class="text-inline">
                                        <span>Heizung</span>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.heizung.$error">
                                        <div ng-messages-include="views/regForm_messages.html"></div>
                                    </div>
                                </div>
                                <input type="text" name="heizung" placeholder="" class="form-control" list="datalist_heizung"
                                       ng-model="c_tool.currentExpose.heizung" ng-model-options="{ debounce: 500 }">
                                <datalist id="datalist_heizung">
                                    <option  data-ng-repeat="dl_opt in c_tool.datalists.heizung | orderBy:'toValue()'" value="{{dl_opt}}">
                                </datalist>
                            </label>
                        </div>
                        <div class="row row-paddingbottom">
                            <label class="control-label col-xs-6">
                                <div>
                                    <div class="text-inline">
                                        <span>Objektbeschreibung</span>
                                        <br>
                                    </div>
                                    <div class="text-inline form-error" ng-messages="form_object.objektbeschreibung.$error">
                                        <div ng-messages-include="views/exposeForm_messages.html"></div>
                                    </div>
                                </div>
                                <textarea name="objektbeschreibung" ng-model="c_tool.currentExpose.objektbeschreibung" ng-model-options="{ debounce: 500 }" class="form-control" ng-minlength="300"></textarea>

                            </label>
                            <label class="control-label col-xs-6">
                                <div>
                                    <div class="row">
                                        <span class="col-xs-6 col-sm-4">Lagebeschreibung</span>
                                        <select name="land" class="col-xs-6 col-sm-4" ng-model="item"
                                                ng-model-options="{ debounce: 500 }" ng-options="item as item.bezirk for item in c_tool.datalists.lagebeschreibung | orderBy:'toString()'"
                                                ng-change="c_tool.currentExpose.lagebeschreibung = item.beschreibung">
                                            <option value="">Vorlage wählen</option>

                                        </select>
                                    </div>
                                    <div class="row form-error" ng-messages="form_object.lagebeschreibung.$error">
                                        <div ng-messages-include="views/exposeForm_messages.html"></div>
                                    </div>
                                </div>
                                <textarea name="lagebeschreibung" ng-model="c_tool.currentExpose.lagebeschreibung" ng-model-options="{ debounce: 500 }" class="form-control" ng-minlength="300"></textarea>

                            </label>

                        </div>
                    </uib-accordion-group>
                    <uib-accordion-group is-open="c_tool.accExpo.statusAusstattung.open">
                        <uib-accordion-heading>
                            Ausstattungsdetails
                            <i class="pull-right glyphicon"
                               ng-class="{'glyphicon-chevron-down': c_tool.accExpo.statusAusstattung.open, 'glyphicon-chevron-right': ! c_tool.accExpo.statusAusstattung.open}"></i>
                        </uib-accordion-heading>
                        <div class="row row-paddingbottom">
                            <div class="control-label col-xs-12">
                                <h4>Innenausstattung</h4>
                                <label class="control-label col-xs-4 col-sm-3" ng-repeat="(item,value) in c_tool.datalists.innenausstattung">
                                    <input type="checkbox" ng-model="c_tool.currentExpose.innenausstattung[value]">
                                    <span class="tag">{{value}}</span>
                                </label>


                            </div>
                        </div>
                        <div class="row row-paddingbottom">
                            <div class="control-label col-xs-12">
                                <h4>Bodenbelag</h4>
                                <label class="control-label col-xs-4 col-sm-3" ng-repeat="(item,value) in c_tool.datalists.bodenbelag">
                                    <input type="checkbox" ng-model="c_tool.currentExpose.boden[value]">
                                    <span class="tag">{{value}}</span>
                                </label>


                            </div>
                        </div>

                        <div class="row row-paddingbottom">
                            <div class="control-label col-xs-4 col-sm-3">
                                <h4>Einbauküche</h4>
                                <label class="control-label col-xs-12">
                                    <input type="checkbox" name="Einbauküche" ng-model="c_tool.currentExpose.kueche" ng-checked="c_tool.currentExpose.kueche">
                                    <span class="tag">Einbauküche vorhanden</span>
                                </label>
                            </div>
                            <div class="col-xs-8 col-sm-9" ng-if="c_tool.currentExpose.kueche">
                                <div class="row row-paddingbottom">
                                    <div class="control-label col-xs-12">
                                        <h4>Küchenausstattung</h4>
                                        <label class="control-label col-xs-4 col-sm-3" ng-repeat="(item,value) in c_tool.datalists.kuechenausstattung">
                                            <input type="checkbox" ng-model="c_tool.currentExpose.kuechenausstattung[value]">
                                            <span class="tag">{{value}}</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="row">
                                    <label class="control-label col-xs-4 col-sm-3">
                                        <div>
                                            <div class="text-inline">
                                                <span>Marke</span>
                                            </div>
                                        </div>
                                        <input type="text" name="kueche_marke" placeholder="" class="form-control" list="datalist_kuechenmarke"
                                               ng-model="c_tool.currentExpose.kuechenmarke" ng-model-options="{ debounce: 500 }">
                                        <datalist id="datalist_kuechenmarke">
                                            <option  data-ng-repeat="dl_opt in c_tool.datalists.kuechenmarke | orderBy: dl_opt" value="{{dl_opt}}">
                                        </datalist>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="row row-paddingbottom">
                            <div class="control-label col-xs-12">
                                <h4>Badezimmer</h4>
                                <div class="row row-paddingbottom">
                                    <div class="col-xs-6 col-sm-3">
                                        <select name="badezimmer" class="form-control" ng-options="item as item for item in c_tool.datalists.badezimmer" ng-model="badezimmer">
                                        </select>
                                    </div>
                                    <div class="col-xs-6 col-sm-3">
                                        <button type="button" class="btn btn-large btn-default" ng-click="c_tool.currentExpose.badezimmer.push({'type':badezimmer,'enSuite':false})">Badezimmer hinzufügen</button>
                                    </div>
                                </div>
                                <div class="row row-paddingbottom" ng-repeat="(key, value) in c_tool.currentExpose.badezimmer track by key">


                                            <ul class="list-inline col-xs-12 col-sm-6">
                                                <li>
                                                    <span class="btn btn-danger glyphicon glyphicon-remove" ng-click="c_tool.currentExpose.badezimmer.splice(key,1)"></span>
                                                </li>
                                                <li style="margin-left:10px;width:50%;vertical-align: middle;">
                                                    <div class="box-dark" style="height: 40px;">
                                                        <div class="col-xs-6">
                                                            <span class="lead">{{value.type}}</span>
                                                        </div>
                                                        <div class="col-xs-6" style="margin-top:5px;">
                                                            <label class="control-label" style="position: relative">
                                                                <input type="checkbox" name="enSuite" ng-model="c_tool.currentExpose.badezimmer[key].enSuite">
                                                                <span class="tag marginLeft10">en Suite</span>
                                                            </label>
                                                        </div>
                                                    </div>




                                                </li>
                                            </ul>


                                </div>
                            </div>
                        </div>
                    </uib-accordion-group>
                    <uib-accordion-group is-open="c_tool.accExpo.statusBilder.open" class="acc_bilder">
                        <uib-accordion-heading>
                            Bilder
                            <i class="pull-right glyphicon"
                               ng-class="{'glyphicon-chevron-down': c_tool.accExpo.statusBilder.open, 'glyphicon-chevron-right': ! c_tool.accExpo.statusBilder.open}"></i>
                        </uib-accordion-heading>
                        <div class="row row-paddingbottom">
                            <div class="col-xs-12">
                                <div class="row row-paddingbottom">
                                    <div class="col-xs-12">
                                        <h4>Objektbilder</h4>
                                        <button type="button" class="btn btn-default" ng-click="c_tool.clickElement('#addFile')">Neues Bild hinzufügen</button>
                                        <input type="file" id="addFile" class="hidden" fileread="" croparea="canvas_crop" modeltarget="cImage"/>
                                    </div>
                                </div>
                                <div class="row croparea" ng-show="c_tool.tempdata.cImage.source!=null">
                                    <div class="col-xs-6">
                                        <canvas id="canvas_crop" style="width:100%;max-width:100%"></canvas>
                                    </div>

                                    <div class="col-xs-5 col-xs-offset-1">
                                        <div class="row row-paddingbottom">
                                            <div class="col-xs-12">
                                                <div id="cropper_outputwrapper" style="overflow: hidden; width: 100%;height:200px;"></div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-xs-6">
                                                <input type="text" ng-model="c_tool.tempdata.cImage.title" list="datalist_bildtitel" placeholder="Doppelklick für Vorlagen, max 40 Zeichen" ng-maxlength="40" size="30">


                                            </div>
                                            <div class="col-xs-6">
                                                <div class="btn-group">
                                                    <button type="button" class="btn btn-large btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                        Bild speichern als<span class="caret"></span>
                                                    </button>
                                                    <ul class="dropdown-menu">
                                                        <li><a ng-click="c_tool.addImage('Titelbild')">Titelbild</a></li>
                                                        <li role="separator" class="divider"></li>
                                                        <li><a ng-click="c_tool.addImage('Objektbild')">Objektbild</a></li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row" ng-show="c_tool.images.object.length>0">
                            <div class="col-xs-12">
                                <ol class="sortable nested_with_switch vertical" id="imageList">
                                  <li class="row box-dark" ng-repeat="(key, value) in c_tool.images.object">
                                      <div class="col-xs-12 col-sm-6">
                                          <div class="row">
                                              <div class="col-xs-2 padding-none iconrow">
                                                  <span class="btn btn-danger glyphicon glyphicon-remove" ng-click="c_tool.images.object.splice(key,1)"></span>
                                              </div>
                                              <div class="col-xs-10">
                                                  <canvas id="canvas_{{key}}" repeat-canvas data="{{value.imgString}}"></canvas>
                                              </div>
                                          </div>
                                      </div>
                                      <div class="col-xs-12 col-sm-6">
                                          <div class="row">
                                              <div class="col-xs-12">
                                                  <input type="text" value="{{value.title}}" ng-model="c_tool.images.object[key].title">
                                              </div>
                                              <div class="col-xs-12">
                                                  <select ng-model="c_tool.images.object[key].kat.value" ng-options="v for v in c_tool.images.object[key].kat.values"></select>
                                              </div>
                                          </div>
                                      </div>
                                  </li>
                                </ol>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12 col-md-6">
                                <div class="row row-paddingbottom">
                                    <div class="col-xs-12">
                                        <h4>Grundriss</h4>
                                        <button type="button" class="btn btn-default" ng-click="c_tool.clickElement('#addGrundris')">Grundriss hinzufügen</button>
                                        <input type="file" id="addGrundris" class="hidden" fileread="" modeltarget="cGrundriss" />
                                    </div>
                                </div>
                                <div class="row" ng-show="c_tool.images.grundriss.length>0">
                                    <div class="col-xs-12">
                                        <ol class="sortable nested_with_switch vertical" id="grundrissList">
                                            <li class="row box-dark" ng-repeat="(key, value) in c_tool.images.grundriss">
                                                <div class="col-xs-12 col-sm-6">
                                                    <div class="row">
                                                        <div class="col-xs-2 padding-none iconrow">
                                                            <span class="btn btn-danger glyphicon glyphicon-remove" ng-click="c_tool.images.grundriss.splice(key,1)"></span>
                                                        </div>
                                                        <div class="col-xs-10">
                                                            <canvas id="canvas_grundriss_{{key}}" repeat-canvas data="{{value.imgString}}"></canvas>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-xs-12 col-sm-6">
                                                    <div class="row">
                                                        <div class="col-xs-12">
                                                            Geschoss: <input type="text" list="datalist_geschoss_zusatz" ng-model="c_tool.images.grundriss[key].title"
                                                                    placeholder="Doppelklick für Vorlagen" ng-model-options="{ debounce: 500 }">

                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                        </ol>
                                    </div>
                                </div>

                            </div>
                            <div class="col-xs-12 col-md-6">
                                <div class="row row-paddingbottom">
                                    <div class="col-xs-12">
                                        <h4>Energieausweis</h4>
                                        <button type="button" class="btn btn-default" ng-click="c_tool.clickElement('#addEnergieausweis')">Energieausweis hinzufügen</button>
                                        <input type="file" id="addEnergieausweis" class="hidden" fileread="" modeltarget="cEnergieausweis" />
                                    </div>
                                </div>
                                <div class="row" ng-show="c_tool.images.energieausweis.length>0">
                                    <div class="col-xs-12">
                                        <ol class="sortable nested_with_switch vertical" id="energieausweisList">
                                            <li class="row box-dark" ng-repeat="(key, value) in c_tool.images.energieausweis">
                                                <div class="col-xs-12 col-sm-6">
                                                    <div class="row">
                                                        <div class="col-xs-2 padding-none iconrow">
                                                            <span class="btn btn-danger glyphicon glyphicon-remove" ng-click="c_tool.images.energieausweis.splice(key,1)"></span>
                                                        </div>
                                                        <div class="col-xs-10">
                                                            <canvas id="canvas_energieausweis_{{key}}" repeat-canvas data="{{value.imgString}}"></canvas>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-xs-12 col-sm-6">
                                                    <div class="row">
                                                        <div class="col-xs-12">
                                                            <input type="text" value="{{value.title}}" ng-model="c_tool.images.energieausweis[key].title" placeholder="Bildtitel">
                                                        </div>

                                                    </div>
                                                </div>
                                            </li>
                                        </ol>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </uib-accordion-group>
                </uib-accordion>

                    <div class="col-xs-12">
                        <button type="button" class="btn btn-large btn-success" ng-click="c_tool.submit_form_expose()">Speichern</button>
                    </div>


            </form>
            <div class="well hidden">

                <div ng-bind-html="c_tool.repLB() | sanitize"></div>
            </div>
        </div>
    </div>
</div>

<datalist id="datalist_bildtitel">
    <option  data-ng-repeat="dl_opt in c_tool.datalists.bildtitel | orderBy: 'toString()'" value="{{dl_opt}}">
</datalist>
<datalist id="datalist_geschoss">
    <option  data-ng-repeat="dl_opt in c_tool.datalists.geschoss | orderBy: dl_opt" value="{{dl_opt}}">
</datalist>
<datalist id="datalist_geschoss_zusatz">
    <option  data-ng-repeat="dl_opt in c_tool.datalists.geschoss_zusatz | orderBy: dl_opt" value="{{dl_opt}}">
</datalist>

<!--

        {"id":"2","geschaeftsart":"2","strasse":"Schnellerstr","hausnummer":"90D","plz":"12439","ort":"Berlin","bezirk":"","land":"1","go":"123","lieferung":"0000-00-00","moebiliert":"","objekttyp":"3","lageHaus":"","lageStockwerk":"","stockwerke":"","stockwerk":"0","haustyp":"","baujahr":"","sanierung":"","renovierung":"","besonderheit":"","exposetitel":"neueingabe mit foto","provision":"","provisionEinheit":"eur","kaution":"","kautionEinheit":"eur","kaltmiete":"800","pauschalmiete":"","nebenkosten":"","kaufpreis":"","stellplatz":"","stellplatztyp":"","stellplatzkosten":"","wohnflaeche":"75","grundstueckflaeche":"","zimmer":"","schlafzimmer":"1","balkon":"","terrasse":"","aussenflaeche_balkon":"","aussenflaeche_terrasse":"","decke":"","wcgast":"","badezimmer":"","badtyp":"null","badbesonderheit":"[]","heizung":"","boden":"","kueche":"","kuecheausstattung":"","innenausstattung":"","energiewert":"","energieausweisTyp":"Bedarfsausweis","denkmalschutz":"","zustand":"","lage":"","manualTextLage":"","manualTextAusstattung":"","manualTextObjekt":"","updatedatum":"2016-07-06 17:08:29","userID":"2","map":"{\"lat\":\"52.4526587\",\"lon\":\"13.5269479\",\"zoom\":\"14\"}"}
            -->